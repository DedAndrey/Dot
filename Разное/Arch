#### Pacman ####

## Установка пакетов ##

pacman -S имя_пакета_1 имя_пакета_2
pacman -S $(pacman -Ssq регулярное_выражение)

# Если пакет имеет несколько версий в разных репозиториях
pacman -S extra/имя_пакета

# Установка группы пакетов
pacman -S gnome
# Список пакетов в группе
pacman -Sg gnome
Enter a selection (default=all): 1-10 15
Enter a selection (default=all): ^5-8 ^2 (кроме)

# Установить пакеты из списка
pacman -S $(cat pkglist)

# Поиск пакетов для установки по названию
pacman -Ss условие
pacman -Si имя_пакета (подробно)

# Загрузка пакета без установки:
pacman -Sw package_name

# Установка пакета из файла
pacman -U /путь/к/пакету/имя_пакета-версия.tar.xz
# Установка пакета из файла и сохранение в кэше
pacman -U file://путь/к/пакету/имя_пакета-версия.pkg.tar.xz
# или из сети
pacman -U http://www.example.com/repo/example.pkg.tar.xz

# Поиск среди установленных пакетов
pacman -Qs условие
pacman -Qii имя_пакета (список резервных копий файлов и список измененных файлов)
# Список файлов установленного пакета
pacman -Ql имя_пакета
# Список явно установленных пакетов
pacman -Qe
# Перечислить все иностранные пакеты (как правило, вручную загруженные и установленные)
pacman -Qm
# Которые не доступны в официальных репозиториях
pacman -Qem
# Список всех родных пакетов (установленные из синхронизируемой базы данных)
pacman -Qn
# Которые доступны в официальных репозиториях
pacman -Qen

# Проверка наличия файлов, установленных пакетом
pacman -Qk имя_пакета
pacman -Qkk имя_пакета (тщательнее)
# Узнать, какому пакету принадлежит нужный файл
pacman -Qo /путь/к/файлу/имя_файла
# Отображение зависимостей в виде дерева
pactree имя_пакета
# Список пакетов, которые зависят от конкретного установленного пакета
pactree -r имя_пакета

## Сохранение/восстановление ##

# Просмотреть список установленных пакетов
pacman -Qqe | grep -v "$(pacman -Qmq)"

# Сохранить список установленных пакетов
pacman -Qqe | grep -v "$(pacman -Qmq)" > pkglist

# Просмотреть список пакетов "сирот"
pacman -Qdt
# Пакеты, которые нужны другим только опционально
pacman -Qdttq
# Пакеты, установлены явно и от которых не зависят другие пакеты
pacman -Qet

## Игнорирование пакетов и обновлений (Редактируем /etc/pacman.conf) ##

# Пропустить пакет
IgnorePkg = список_пакетов

# Пропустить группу пакетов
IgnoreGroup = список_групп

# Не обновлять пакет
NoUpgrade = список_пакетов

# Не менять файлы в директории
NoExtract = список_директорий

## Удаление пакетов ##

pacman -R имя_пакета

# Удалить пакет с зависимостями (не используемыми другими пакетами)
pacman -Rs имя_пакета

# Удалить пакет с зависимыми и зависящими пакетами
pacman -Rsc имя_пакета

# Удаление пакета, игнорируя зависимости
pacman -Rdd имя_пакета

# Удалить пакеты "сироты"
pacman -Rsn $(pacman -Qdtq)

# Удалить резервные копии конфигурационных файлов удаляемых приложений
pacman -Rn имя_пакета

## Работа с кэшем ##

# Очистка кэша неустановленных пакетов
pacman -Sc

# Очистка кэша пакетов
pacman -Scc

# Удалить из кэша все версии каждого пакета, кроме трех недавно использовавшихся
paccache -r

## Обновление системы ##

pacman -Syu

#### AUR ####

# Установка пакетов
yay -S package
yay -S --noconfirm <package>

# Удаление пакетов
yay -Rns package

# Поиск
yay -Ss
yay -Si

# Обновление
yay -Pu (список для обновления)
yay -Syu

# Включить пакеты разработки
yay -Syu --devel --timeupdate

# Очистить ненужные зависимости
yay -Yc

# Системная статистика
yay -Ps

# Создает базу данных пакета разработки, используемую для обновлений devel
yay -Y --gendb

*****
Управление принтерами:
http://localhost:631/admin

Если не пускает на страницу:
sudo systemctl status cups -- смотрим статус
sudo systemctl start cups -- стартуем сервис
sudo systemctl enable cups -- добавляем в автозагрузку

*****
Чрут в лайве:
lsblk
sudo mount /dev/sda1 /mnt && sudo manjaro-chroot /mnt /bin/bash
grub-install /dev/sda
grub-mkconfig -o /boot/grub/grub.cfg
sudo mkinitcpio -P
exit
reboot

*****
Установите новый загрузчик GRUB
sudo grub-install /dev/sda

Выполните проверку
sudo grub-install --recheck /dev/sda

Обновите конфигурацию
sudo update-grub
